<!DOCTYPE html>
<html lang="en">
<!--
MADE BY:  Krzysztof Szumko
DATE:     11/04/2019
 -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <style type="text/css">
    .candidates {
      font-size: 12px;
      background: #fff;
      margin: 45px;
      width: 480px;
      border-collapse: collapse;
      text-align: left;
    }

    .candidates th {
      font-size: 16px;
      font-weight: normal;
      color: #039;
      padding: 10px 8px;
      border-bottom: 2px solid #6678b1;
    }

    .candidates td {
      color: #669;
      padding: 9px 8px 0px 8px;
    }

    .candidates tbody tr:hover td {
      color: #009;
    }
  </style>
  <title>Document (KSzumko)</title>
</head>

<body>
  <div id="container">
    <h2> Demo Table Of Candidates <h2>
    <table class="candidates" id="candidates_example">
      <thead>
        <tr>
          <th>Name</th>
          <th>Skills</th>
        </tr>
      </thead>
      <tr>
        <td>Cirpo</td>
        <td>JavaScript, Docker</td>
      </tr>
      <tr>
        <td>Louis</td>
        <td>Java, AEM</td>
      </tr>
      <tr>
        <td>Nermin</td>
        <td>.NET, Azure</td>
      </tr>
    </table>
    <h2> Candidates (Filtered By JavaScript Skills) <h2>
  </div>
  <script type="text/javascript">
    
    // Creating a pool of candidates for sorting and populating tables. 
    // Added some new candidates.
    const newCandidates = [
      { name: "Kerrie", skills: ["JavaScript", "Docker", "Ruby"] },
      { name: "Krzysztof", skills: ["Python", "JavaScript", "Java"] },
      { name: "Jacquline", skills: ["JavaScript", "Azure"] },
      { name: "Kathy", skills: ["JavaScript", "Java"] },
      { name: "Anna", skills: ["JavaScript", "AWS"] },
      { name: "Matt", skills: ["PHP", "AWS"] },
      { name: "Matt", skills: ["PHP", ".Net", "Docker"] },
      { name: "Michael", skills: ["Azure"] },
      { name: "Oskar", skills: ["Azure", "PHP", ".Net", "Docker"] },
      { name: "Trudy", skills: ["Paper RPG"] },
    ];

    function removeRowsFromTable(table) {
      const rows = table.getElementsByTagName("tr");

      while (rows.length > 1) {
        table.deleteRow(1);
      }
    }

    function insertCandidate(tbody, name, skills) {
      const newRow = tbody.insertRow();
      const nameCell = newRow.insertCell();
      const skillCell = newRow.insertCell();

      const candidateName = document.createTextNode(name);
      const candidateSkills = document.createTextNode(skills.join(', '));

      nameCell.appendChild(candidateName);
      skillCell.appendChild(candidateSkills);
    }

    function addCandidatesToTable(table, candidates) {
      candidates.forEach(candidate => insertCandidate(table, candidate.name, candidate.skills));
    }

    //Function is filtering array of candidates for those with specific skill only.
    function filterCandidateBySkill(candidates, skill) {
      var result = [];
      result = candidates.filter(function(skillCheck) {
       for(key in skillCheck){
        if(skillCheck[key].includes(skill)){
            return candidates;
          }
        }
      });
      candidates = result;
      return candidates;
    }

    //FIRST TABLE - JAVASCRIPT SKILLED ONLY
    var candidatesTable = document.getElementById("candidates_example");
    var newCandidatesTable = candidatesTable.cloneNode(true);

    removeRowsFromTable(newCandidatesTable);
    var newTbody = newCandidatesTable.getElementsByTagName('tbody')[0];

    var filteredCandidates = filterCandidateBySkill(newCandidates, 'JavaScript')
    addCandidatesToTable(newTbody, filteredCandidates)

    document.body.appendChild(newCandidatesTable);
  </script>
  
  <!--SECOND TABLE - AWS SKILLED ONLY -->
  <div>
    <h2>Candidates (Filtered By AWS Skills) </h2>
  <script type="text/javascript">
    var candidatesTable2 = document.getElementById("candidates_example");
    var newCandidatesTable2 = candidatesTable.cloneNode(true);

    removeRowsFromTable(newCandidatesTable2);
    var newTbody1 = newCandidatesTable2.getElementsByTagName('tbody')[0];

    var filteredCandidates = filterCandidateBySkill(newCandidates, 'AWS')
    addCandidatesToTable(newTbody1, filteredCandidates)

    document.body.appendChild(newCandidatesTable2);
  </script>
  </div>

  <!--THIRD TABLE - PYTHON SKILLED ONLY -->
  <div>
    <h2>Candidates (Filtered By Python Skills) </h2>
  <script type="text/javascript">
    var candidatesTable3 = document.getElementById("candidates_example");
    var newCandidatesTable3 = candidatesTable.cloneNode(true);

    removeRowsFromTable(newCandidatesTable3);
    var newTbody1 = newCandidatesTable3.getElementsByTagName('tbody')[0];

    var filteredCandidates = filterCandidateBySkill(newCandidates, 'Python')
    addCandidatesToTable(newTbody1, filteredCandidates)

    document.body.appendChild(newCandidatesTable3);
  </script>
  </div>

  <!--FOURTH TABLE - AZURE SKILLED ONLY -->
  <div>
    <h2>Candidates (Filtered By Azure Skills) </h2>
  <script type="text/javascript">
    var candidatesTable1 = document.getElementById("candidates_example");
    var newCandidatesTable1 = candidatesTable.cloneNode(true);

    removeRowsFromTable(newCandidatesTable1);
    var newTbody1 = newCandidatesTable1.getElementsByTagName('tbody')[0];

    var filteredCandidates = filterCandidateBySkill(newCandidates, 'Azure')
    addCandidatesToTable(newTbody1, filteredCandidates)

    document.body.appendChild(newCandidatesTable1);
  </script>
  </div>
</body>

</html>
